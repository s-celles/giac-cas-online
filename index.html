<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>rnGIAC ‚Äî Reactive Notebook GIAC</title>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  External dependencies (loaded from CDN)
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script src="https://unpkg.com/mathlive"></script>
<script src="https://unpkg.com/@cortex-js/compute-engine"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css">
<script src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"></script>
<script>
  // Observable Runtime ‚Äî loaded dynamically to avoid timing issues with module scripts
  window._ObservableRuntime = null;
  window._observableReady = new Promise(function(resolve) {
    window._observableResolve = resolve;
  });
  import('https://cdn.jsdelivr.net/npm/@observablehq/runtime@6/+esm').then(function(mod) {
    window._ObservableRuntime = mod.Runtime;
    window._observableResolve();
    console.log('Observable Runtime loaded');
  }).catch(function(e) {
    console.warn('Observable Runtime failed to load:', e);
    window._observableResolve(); // resolve anyway so boot continues
  });

  // Lit.js ‚Äî slider web components (loaded as ES module)
  window._litReady = new Promise(function(resolve) {
    window._litResolve = resolve;
  });
</script>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  Giac engine (asm.js) ‚Äî HOST giac.js LOCALLY
  Download: https://www-fourier.univ-grenoble-alpes.fr/~parisse/giacjs.tar.gz
  We bypass giacsimple.js and define a minimal Module object
  so giac.js (Emscripten asm.js build) can initialize.
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div style="position:absolute;left:-9999px;width:0;height:0;overflow:hidden"><canvas id="canvas" width="1" height="1"></canvas></div>
<script>
var Module = {
  ready: false,
  canvas: document.getElementById('canvas'),
  preRun: [],
  postRun: [],
  _giacMessages: [],
  print: function(text) {
    if (Module._giacCapture) { Module._giacMessages.push({ type: 'info', text: text }); return; }
    console.log('giac:', text);
  },
  printErr: function(text) {
    if (Module._giacCapture) { Module._giacMessages.push({ type: 'warn', text: text }); return; }
    console.warn('giac:', text);
  },
  setStatus: function(text) { if (text) console.log('giac status:', text); },
  totalDependencies: 0,
  monitorRunDependencies: function(left) {
    this.totalDependencies = Math.max(this.totalDependencies, left);
  },
  onRuntimeInitialized: function() {
    console.log('Giac runtime initialized');
    Module.ready = true;
  }
};
// Minimal UI stub ‚Äî giac.js references UI.* during some computations
var UI = {
  Datestart: Date.now(),
  disable3d: 0,
  warnpy: false,
  python_output: '',
  assistant_matr_maxrows: 100,
  assistant_matr_maxcols: 100,
  clean_for_html: function(s) { return s; },
  add_python_output: function(s) { UI.python_output += s; },
  set_config_width: function() {},
  open_sheet: function() {},
  sheet_recompute: function() {},
  sheet_set_ij: function() {}
};
</script>
<script src="giac.js"></script>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  Application CSS
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<link rel="stylesheet" href="css/notebook.css">

</head>
<body>

<div class="header"><div class="header-inner">
  <div class="header-left">
    <h1>üìì <span data-i18n="title">rnGIAC</span></h1>
    <p data-i18n="subtitle">Reactive Notebook GIAC ‚Äî MathJSON ‚Üî Giac via WebAssembly</p>
    <a href="https://github.com/s-celles/giac-cas-online" target="_blank" rel="noopener" style="font-size:.85rem;opacity:.7;text-decoration:none;color:inherit"><svg height="16" width="16" viewBox="0 0 24 24" style="vertical-align:text-bottom;margin-right:.3em;fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-linejoin:round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>Source code</a>
  </div>
  <div class="header-right">
    <select class="lang-select" id="lang-select" onchange="setLocale(this.value)">
      <option value="en">English</option>
      <option value="fr">Fran√ßais</option>
      <option value="es">Espa√±ol</option>
      <option value="de">Deutsch</option>
      <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
      <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
      <option value="ru">–†—É—Å—Å–∫–∏–π</option>
      <option value="zh">‰∏≠Êñá</option>
      <option value="ja">Êó•Êú¨Ë™û</option>
    </select>
    <div id="giac-status">
      <span class="dot"></span>
      <span class="text" data-i18n="giacLoading">Loading Giac‚Ä¶</span>
    </div>
  </div>
</div></div>

<div class="toolbar-wrap"><div class="toolbar">
  <button class="primary" onclick="runAll()" data-i18n="runAll">‚ñ∂ Run all</button>
  <button onclick="clearAllOutputs()" data-i18n="clearOutputs">‚úï Clear outputs</button>
  <div class="sep"></div>
  <button onclick="exportNotebook()" data-i18n="exportBtn">üíæ Export</button>
  <button id="share-btn" onclick="shareNotebook()" data-i18n="shareBtn" style="display:none">üì§ Share</button>
  <button onclick="importNotebook()" data-i18n="importBtn">üìÇ Import</button>
  <button id="examples-btn" onclick="showExamplesMenu()" data-i18n="examplesBtn">üìö Examples</button>
  <div class="sep"></div>
  <button onclick="showShareQR()" data-i18n="shareQR">üì§ Share QR</button>
  <button onclick="showScanQR()" data-i18n="scanQR">üì∑ Scan QR</button>
  <div class="sep"></div>
  <label class="reactive-toggle"><input type="checkbox" id="reactive-toggle" checked onchange="toggleReactiveMode(this.checked)"><span class="reactive-label" data-i18n="reactiveToggle">Reactive</span></label>
  <div class="sep"></div>
  <button id="report-view-btn" onclick="toggleReportView()" data-i18n="reportView">Report view</button>
  <div class="sep"></div>
  <button onclick="showAboutDialog()" data-i18n="aboutBtn">‚Ñπ About</button>
</div></div>

<div class="notebook" id="notebook">
  <div id="empty-notebook" class="empty-notebook">
    <p data-i18n="emptyNotebook">No cells yet.</p>
    <button onclick="addCell('math')" data-i18n="addFirstCell">+ Add your first cell</button>
    <p class="empty-hint" data-i18n="emptyHint">Click the type badge (Math / GIAC / Text) to change the cell type.</p>
  </div>
  <div id="notebook-footer" class="notebook-footer" style="display:none">
    <p class="empty-hint" data-i18n="addCellHint">Click the + zones between cells to add a cell.</p>
  </div>
</div>
<div class="bottombar">
  <span><kbd>Shift</kbd>+<kbd>Enter</kbd> <span data-i18n="shortcutRun">Run</span></span>
  <span><kbd>Ctrl</kbd>+<kbd>Enter</kbd> <span data-i18n="shortcutRunNew">Run + new cell</span></span>
  <span><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Enter</kbd> Run (no cascade)</span>
  <span><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>H</kbd>/<kbd>D</kbd>/<kbd>L</kbd> Hide/Disable/Lock</span>
  <label><input type="checkbox" id="toggle-debug" onchange="toggleAllDebug(this.checked)">
    <span data-i18n="showMathJSON">Show MathJSON</span></label>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  Application JavaScript ‚Äî order matters
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script src="js/i18n/en.js"></script>
<script src="js/i18n/fr.js"></script>
<script src="js/i18n/es.js"></script>
<script src="js/i18n/de.js"></script>
<script src="js/i18n/ar.js"></script>
<script src="js/i18n/hi.js"></script>
<script src="js/i18n/ru.js"></script>
<script src="js/i18n/zh.js"></script>
<script src="js/i18n/ja.js"></script>
<script src="js/i18n.js"></script>
<script src="js/giac-commands.js"></script>
<script src="js/giac-init.js"></script>
<script src="js/mathjson-giac.js"></script>
<script src="js/state.js"></script>
<script src="js/io.js"></script>
<script src="js/plot-rendering.js"></script>
<script src="js/reactive-dag.js"></script>
<script src="js/cells.js"></script>
<script src="js/execution.js"></script>
<script src="js/actions.js"></script>
<script src="js/examples.js"></script>
<script src="js/fountain.js"></script>
<script src="js/qr-sharing.js"></script>
<script src="js/boot.js"></script>
<script type="module" src="js/slider-components.js"></script>

</body>
</html>
